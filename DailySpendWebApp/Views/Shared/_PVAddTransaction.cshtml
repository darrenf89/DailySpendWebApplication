@model DailySpendBudgetWebApp.Models.Transactions


<div class="container p-0" style="min-height: 82vh;">
    <div>
        <div class="d-flex mb-1 ps-3 pe-3 justify-content-center">
            <div class="Transaction-Toggle col-11 bg-white" id="divTransactionType">
                <div class="d-flex justify-content-center align-items-center text-center">
                    <div class="col-6" id="divIncoming">
                        <input type="radio" id="rdbIncoming" name="TransactionToggleOption" value="Incoming" />
                        <label style="font-size:10pt" for="rdbIncoming" class="lblTransactionToggleOption pe-0">
                            <strong>Incoming &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+</strong>
                        </label>
                    </div>
                    <div class="col-6 text-white" id="divOutgoing">
                        <input type="radio" id="rdbOutgoing" name="TransactionToggleOption" value="Outgoing" />
                        <label style="font-size:10pt" for="rdbOutgoing" class="lblTransactionToggleOption ps-0">
                            <strong> - &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Outgoing </strong>
                        </label>
                    </div>
                    <input asp-for="isIncome" type="hidden" value="false"/>
                </div>
            </div>
        </div>
    </div>
    <div id="divIsRegularSavingSelector" class="card text-white bg-white mt-5 mb-3 shadow rounded-5 border-dark">
        <div id="divTransactionAmount" class="row justify-content-center align-items-center ms-2 me-2 mt-1">
            <input id="txtTransactionAmount" type="text" pattern="^£\d{1,3}(,\d{3})*(\.\d+)" value="" style="cursor: pointer; width: 75%; font-size: 25pt;" data-type="currencyneg" placeholder="-£0.00" class="AmountRed pe-2 pt-2 pb-2 text-center" />
            <input asp-for="TransactionAmount" type="number" style="display:none;" />
            <span class="text-danger" asp-validation-for="TransactionAmount"></span>
        </div>
    </div>
</div>

<script>

    $(document).ready(LoadTransactionOutgoing());
    
    document.querySelectorAll('input[name="TransactionToggleOption"]').forEach(radio => {
        radio.addEventListener('click', HandleTransactionRadioClick);
    });

    function HandleTransactionRadioClick() {
        if (document.getElementById('rdbOutgoing').checked) {
            LoadTransactionOutgoing();
            NegativeformatCurrency($("#txtTransactionAmount"))
        }
        else if (document.getElementById('rdbIncoming').checked) {
            LoadTransactionIncoming();
            formatCurrency($("#txtTransactionAmount"))
        }
    }

    function LoadTransactionIncoming() {
        document.getElementById('isIncome').value = true;
        document.getElementById('divIncoming').style.backgroundColor = '#38b44a';
        document.getElementById('divOutgoing').style.backgroundColor = '#fff';
        document.getElementById('rdbOutgoing').checked = false;
        document.getElementById('rdbIncoming').checked = true;
        $('#txtTransactionAmount').addClass('AmountGreen').removeClass('AmountRed');
        $('#txtTransactionAmount').attr('data-type', 'PositiveCurrency');
        $('#txtTransactionAmount').attr('placeholder', '£0.00');
        $("input[data-type='PositiveCurrency']").on({
            keyup: function () {
                formatCurrency($(this));
            },
            blur: function () {
                formatCurrency($(this), "blur");
            }
        });
    }

    function LoadTransactionOutgoing() {
        document.getElementById('isIncome').value = false;
        document.getElementById('divIncoming').style.backgroundColor = '#fff';
        document.getElementById('divOutgoing').style.backgroundColor = '#e95420';
        document.getElementById('rdbOutgoing').checked = true;
        document.getElementById('rdbIncoming').checked = false;
        $('#txtTransactionAmount').addClass('AmountRed').removeClass('AmountGreen');
        $('#txtTransactionAmount').attr('data-type', 'NegativeCurrency');
        $('#txtTransactionAmount').attr('placeholder', '-£0.00');
        $("input[data-type='NegativeCurrency']").on({
            keyup: function () {
                NegativeformatCurrency($(this));
            },
            blur: function () {
                NegativeformatCurrency($(this), "blur");
            }
        });
    }





</script>