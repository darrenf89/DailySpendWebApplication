@model DailySpendBudgetWebApp.Models.CreateABudgetPageModel

@{
    ViewData["Title"] = "Enter Budget Details";
    Layout = "~/Views/Shared/_LayoutNoFotter.cshtml";
}

<input type="hidden" id="hdnServerDate" value="@ViewBag.CurrentDate" />
<input type="hidden" id="hdnPaymentPeriod" value="@ViewBag.PaymentPeriod" />
<form method="Post">
    <div class="bg-transparent" style="min-height: 82vh;">
        <div class="mt-4 row justify-content-center p-2">
            @if (ViewBag.hasBudgetName)
            {
            <div id="divBudgetName" class="card text-white bg-primary mb-3 shadow rounded-4 ms-3 me-3 border-dark w-75">
                <div class="d-flex justify-content-around align-items-center w-100 mt-auto mb-auto">                        
                    <div class="input-container col-9 mb-3">                        
                        <input class="text-white border-bottom border-1 border-dark" style="font-size:20px;" value="@ViewBag.BudgetName" asp-for="BudgetName" type="text" disabled onchange="ChangeDivBudgetNameBorder();" />
                    </div>
                </div>
            </div>
            }
            else
            {
                <div id="divBudgetName" class="card text-white bg-white mb-3 shadow rounded-4 ms-3 me-3 border-dark w-75">
                    <div class="d-flex justify-content-around align-items-center mt-auto mb-auto">                                        
                    <div class="input-container col-9 mb-3" >
                        <input style="font-size:20px;" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Budget Name'" placeholder="Budget Name" asp-for="BudgetName" type="text" required onchange="ChangeDivBudgetNameBorder();"/>
                            <span style="font-size:10px" class="text-danger text-center" asp-validation-for="BudgetName"></span>
                    </div>
                </div>
            </div>
            }
        </div>
        <div class="p-2">
            <div class="accordion mb-3 shadow ms-1 me-1 " id="divBudgetSettings">
                <div class="accordion-item">
                    <h2 class="accordion-header text-white" id="headingTwo">
                        <div class="d-flex align-items-center justify-content-center m-0 p-0">                            
                            <button class="accordion-button text-white bg-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                                Budget Period and Balance Details
                            </button>
                        </div>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse show" aria-labelledby="headingTwo" data-bs-parent="#accordionExample" style="">
                        <div class="accordion-body p-1">
                            <div class="ps-4 pe-4 mt-3">
                                <label class="d-flex form-label ms-2 mb-2 text-primary" asp-for="StartingBalance"></label>
                                <div class="input-group w-75">
                                    <span style="width: 5%" class="input-group-text" id="CurrencySymbol">£</span>
                                    <input style="width: 45%" asp-for="StartingBalance" type="Number" pattern="^\d*(\.\d{0,2})?$" step="0.01" class="form-control" placeholder="0,000" id="StartingBalance" value="@Model.StartingBalance" />
                                </div>
                            </div>
                            <div class="ps-4">
                                <span asp-validation-for="StartingBalance" style="font-size:8pt" class="text-danger text-center"></span>
                            </div>
                            <div class="ps-4 pe-4 mt-3">
                                <label class="d-flex form-label ms-2 mb-2 text-primary" asp-for="NextPayDayAmount"></label>
                                <div class="input-group w-75">
                                    <span style="width: 5%" class="input-group-text" id="CurrencySymbolPay">£</span>
                                    <input style="width: 45%" asp-for="NextPayDayAmount" type="Number" pattern="^\d*(\.\d{0,2})?$" step="0.01" class="form-control" placeholder="0,000" id="NextPayDayAmount" value="@Model.NextPayDayAmount" />
                                </div>
                            </div>
                            <div class="ps-4">
                                <span asp-validation-for="NextPayDayAmount" style="font-size:8pt" class="text-danger text-center"></span>
                            </div>
                            <div id="payinfo" class="ps-4 pe-4 mt-3">
                                <label asp-for="NextIncomeDate" class="d-flex form-label ms-2 mb-2 text-primary"></label>
                                <input class="form-control text-secondary w-75" type="date" asp-for="NextIncomeDate" value="@Model.NextIncomeDate"/>
                            </div>
                            <div class="ps-4">
                                <span asp-validation-for="NextIncomeDate" style="font-size:8pt" class="text-danger text-center"></span>
                            </div>
                            <div class="ms-4 mb-1 mt-4 ps-2 text-primary">
                            </div>
                            <div class="text-primary mb-3 ps-3">I want my budgeting Period to be ...</div>
                            <fieldset class="form-group">
                                <div style="font-size: 10pt;" class="ms-5 me-4 justify-content-between" id="PayRadioButtons">
                                    <div class="form-check col-10 p-0">
                                        <input type="hidden" asp-for="Everynth" value="@Model.Everynth" />
                                        <input class="form-check-input" type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked="@Model.Everynth" />
                                        <label class="form-check-label align-self-center text-secondary" for="optionsRadios1" id="lblOptionsRadios1">
                                            Every nth ...
                                        </label>
                                    </div>
                                    <div class="form-check col-10 p-0">
                                        <input type="hidden" asp-for="WorkingDays" value="@Model.WorkingDays" />
                                        <input class="form-check-input align-self-center" type="radio" name="optionsRadios" id="optionsRadios2" value="option2" checked="@Model.WorkingDays" />
                                        <label class="form-check-label align-self-center text-secondary" for="optionsRadios2" id="lblOptionsRadios2">
                                            ... Working days before end of month
                                        </label>
                                    </div>
                                    <div class="form-check col-10 p-0">
                                        <input type="hidden" asp-for="OfEveryMonth" value="@Model.OfEveryMonth" />
                                        <input class="form-check-input align-self-center" type="radio" name="optionsRadios" id="optionsRadios3" value="option3" checked="@Model.OfEveryMonth" />
                                        <label class="form-check-label align-self-center text-secondary" for="optionsRadios3" id="lblOptionsRadios3">
                                            on the ... of every month
                                        </label>
                                    </div>
                                    <div class="form-check col-10 p-0">
                                        <input type="hidden" asp-for="LastOfTheMonth" value="@Model.LastOfTheMonth" />
                                        <input class="form-check-input align-self-center" type="radio" name="optionsRadios" id="optionsRadios4" value="option3" checked="@Model.LastOfTheMonth" />
                                        <label class="form-check-label align-self-center text-secondary" for="optionsRadios4" id="lblOptionsRadios4">
                                           on the last ... of the month
                                        </label>
                                    </div>
                                </div>
                            </fieldset>
                            <div class="ps-4">
                                <span asp-validation-for="LastGivenDayOfWeekPay" style="font-size:8pt" class="text-danger text-center"></span>
                            </div>
                            <div class="mt-4 mb-1 pb-3 pe-1 border-bottom border-secondary d-flex">
                                <div id="divPeriodicPay" style="display: none;" class="ps-2 col-12 justify-content-end align-items-center">
                                    <div class="text-center me-1" style="display: flex">
                                        <span class="text-primary form-label mb-0">Every</span>
                                    </div>
                                    <div class="text-center me-1" style="display: flex">
                                        <input style="max-width: 50px" class="form-control text-primary text-center" type="Number" min="1" max="28" asp-for="PeriodicPayPeriod" value="@Model.PeriodicPayPeriod" />
                                    </div>
                                    <div class="" style="display: flex">
                                        <div class="DropDown">
                                            <select class="form-select text-primary text-center" id="PeriodicPayPeriodDDL" data-form-type="" asp-for="PeriodicPayPeriodDDL" value="@Model.PeriodicPayPeriodDDL">
                                                <option>days</option>
                                                <option>weeks</option>
                                                <option>months</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div id="divLastDayOfMonthPay" style="display: none;" class="ps-2 col-12 justify-content-end align-items-center">
                                    <div class="text-center me-1">
                                        <input style="max-width: 50px" class="form-control text-primary text-center" type="Number" min="1" max="28" asp-for="LastDayOfMonthPayPeriod" value="@Model.LastDayOfMonthPayPeriod" />
                                    </div>
                                    <div class="text-center">
                                        <span class="text-primary form-label mb-0">Working days before end of month</span>
                                    </div>
                                </div>
                                <div id="divGivenDayOfMonthPay" style="display: flex;" class="ps-2 col-12 justify-content-end align-items-center">
                                    <div class="text-center me-1">
                                        <span class="text-primary form-label mb-0">On the </span>
                                    </div>
                                    <div class="text-center me-1">
                                        <input style="max-width: 50px" class="form-control text-primary text-center" type="Number" min="1" max="28" asp-for="GivenDayOfMonthPayPeriod" value="@Model.GivenDayOfMonthPayPeriod" />
                                    </div>
                                    <div class="text-center">
                                        <span class="text-primary form-label mb-0"> of every month</span>
                                    </div>
                                </div>
                                <div id="divLastGivenDayOfWeekPay" style="display: none;" class="ps-2 col-12 justify-content-end align-items-center">
                                    <div class="text-center me-1">
                                        <span class="text-primary form-label mb-0">On the Last</span>
                                    </div>
                                    <div class="text-center me-1 dropdown">
                                        <select class="form-select text-primary" asp-for="LastGivenDayOfWeekPay" data-form-type="" value="@Model.LastGivenDayOfWeekPay">
                                            <option>Monday</option>
                                            <option>Tuesday</option>
                                            <option>Wednesday</option>
                                            <option>Thursday</option>
                                            <option>Friday</option>
                                            <option>Saturday</option>
                                            <option>Sunday</option>
                                        </select>
                                    </div>
                                    <div class="text-center">
                                        <span class="text-primary form-label mb-0"> of the month</span>
                                    </div>
                                </div>
                            </div>                            
                            <div id="divSaveBudgetDetails" class="d-flex align-items-center justify-content-end">
                                <button type="submit" asp-action="EditBudgetDetailsStage" asp-controller="Budgets" id="btnEditBudgetDetails" class="btn btn-dark" style="display: none;">Edit Details</button>
                                <button type="submit" asp-action="SaveBudgetDetails" asp-controller="Budgets" id="btnSaveBudgetDetails" class="btn btn-primary">Save Budget Details</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>                            
            <div class="accordion mb-3 shadow ms-1 me-1 " id="divBudgetSettings">
                <div class="accordion-item">
                    <h2 class="accordion-header text-white" id="headingOne">
                        <div>
                            <button class="accordion-button text-white bg-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                Budget Settings!
                            </button>
                        </div>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample" style="">
                        <div class="accordion-body p-1">
                            <div class="DropDown">
                                <label asp-for="CurrencyDDL" id="lblCurrencyDDL" class="d-flex form-label ms-4 mb-0 text-secondary"></label>
                                <select onchange="onSelectionChangeWLabel('CurrencyDDL');" asp-for="CurrencyDDL" asp-items=ViewBag.CurrencyDDL class="form-control w-75 ms-4 border-0 text-secondary p-0 ps-4"></select>
                                <div class="border-bottom border-secondary m-2 ms-3 me-3"></div>
                            </div>
                            <div class="DropDown">
                                <label asp-for="NumberFormatDDL" id="lblNumberFormatDDL" class="d-flex form-label ms-4 mb-0 text-secondary"></label>
                                <select onchange="onSelectionChangeWLabel('NumberFormatDDL');" id="NumberFormatDDL" asp-for="NumberFormatDDL" asp-items=ViewBag.NumberFormatDDL class="form-control w-75 ms-4 border-0 text-secondary p-0 ps-4"></select>
                                <div class="border-bottom border-secondary m-2 ms-3 me-3"></div>
                            </div>
                            <div class="DropDown">
                                <label asp-for="CurrencyPlacementDDL" id="lblCurrencyPlacementDDL" class="d-flex form-label ms-4 mb-0 text-secondary"></label>
                                <select onchange="onSelectionChangeWLabel('CurrencyPlacementDDL');" asp-for="CurrencyPlacementDDL" asp-items=ViewBag.CurrencyPlacementDDL class="form-control w-75 ms-4 border-0 text-secondary p-0 ps-4"></select>
                                <div class="border-bottom border-secondary m-2 ms-3 me-3"></div>
                            </div>
                            <div class="DropDown mb-1 pb-3 pe-1 border-bottom border-secondary">
                                <label asp-for="DateFormatDDL" id="lblDateFormatDDL" class="d-flex form-label ms-4 mb-0 text-secondary"></label>
                                <select onchange="onSelectionChangeWLabel('DateFormatDDL');" asp-for="DateFormatDDL" asp-items=ViewBag.DateFormatDDL class="form-control w-75 ms-4 border-0 text-secondary p-0 ps-4"></select>
                                <div class="border-bottom border-secondary m-2 ms-3 me-3"></div>
                            </div>
                            <div id="divSaveBudgetSettings" class="d-flex align-items-center justify-content-end">
                                <button type="submit" asp-action="EditBudgetSettingsStage" asp-controller="Budgets" id="btnEditBudgetDetails" class="btn btn-dark" style="display: none;">Edit Settings</button>
                                <button type="submit" asp-action="SaveBudgetSettings" asp-controller="Budgets" id="btnSaveBudgetDetails" class="btn btn-primary">Save Budget Settings</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="SummaryIncomeDetails" style="display: none;" class="card text-white bg-primary mb-3 shadow">
            <div class="card-header p-2">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="m-0">Payday Baby!</h5>
                    <a href="#" id="EditIncomeDetails" class="text-white"><i class="bi bi-pencil-square text-white"></i></a>
                </div>
            </div>
            <div class="card-body p-2">
                <div class="card-text">
                    <div id="divMessageStringOne" class="pb-2"></div>
                    <div id="divMessageStringTwo" class="pb-2"></div>
                </div>
            </div>
        </div>
        <div id="SummarySavingsDetails" style="display: none;" class="card text-white bg-primary mt-3 mb-3 shadow">
            <div class="card-header p-2">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="m-0">What ya Saving for?!</h5>
                    <a href="#" id="EditSavingsDetails" class="text-white"><i class="bi bi-pencil-square text-white"></i></a>
                </div>
            </div>
            <div class="card-body p-2">
                <div class="card-text">
                    <div id="divSavingsSummaryMessageString" class="pb-2"></div>
                </div>
            </div>
        </div>
        <div class="p-2">
            <div id="OpenSavingsDetails" class="p-2">
                <a class="btn btn-lg btn-dark rounded-1 col-12 mb-1 shadow" style="font-size: 14pt;">Add Some Savings &nbsp;<i class="bi bi-piggy-bank text-white"></i></a>
            </div>
            <div id="OpenBillsDetails" class="p-2">
                <a class="btn btn-lg btn-dark rounded-1 col-12 mb-1 shadow" style="font-size: 14pt;">Add Some Bills &nbsp;<i class="bi bi-receipt text-white"></i></a>
            </div>
            <div id="OpenIncomeDetails" class="p-2">
                <a class="btn btn-lg btn-dark rounded-1 col-12 mb-1 shadow" style="font-size: 14pt;">Add Extra Income! &nbsp;<i class="bi bi-cash-stack text-white"></i></a>
            </div>
        </div>        
    </div>
    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel" style="max-width: 80vw;">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasExampleLabel">Offcanvas</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div>
              Some text as placeholder. In real life you can have the elements you have chosen. Like, text, images, lists, etc.
            </div>           
        </div>
    </div>
    <footer class="sticky-bottom m-0 p-0"style="width: 100%">
        <div class="d-flex flex-column align-items-center justify-content-center">
            <button type="submit" class="btn btn-lg btn-success rounded-1 mb-4 col-10"><i class="bi bi-file-earmark-plus"></i> &nbsp Create Budget</button>
        </div>
    </footer>
</form>
<form method="post">
    <div class="modal" id="SavingsModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header bg-dark p-3 pt-3 pb-2 border-bottom border-primary border-3">
                    <h5 class="modal-title text-primary">Add a Saving to your Budget</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="SavingsModal" aria-label="Close" id="CloseSavingModal">
                        <span aria-hidden="true"></span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="SavingsInfo">
                    </div>
                </div>
                <div class="modal-footer bg-dark p-1 border-top border-primary border-3">
                    <button asp-controller="Budgets" asp-action="AddSavingBudget" type="submit" id="btnSaveSavings" class="btn btn-primary">Save changes</button>
                    <button type="button" id="btnCancelSavings" class="btn btn-danger" data-bs-dismiss="SavingsModal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</form>
<form method="Post">
    <div class="modal" id="BillsModal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header bg-dark p-3 pt-3 pb-2 border-bottom border-primary border-3">
                    <h5 class="modal-title text-primary">Add a Bill to your Budget</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="BillsModal" aria-label="Close" id="CloseBillsModal">
                        <span aria-hidden="true"></span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="BillsInfo">
                    </div>
                </div>
                <div class="modal-footer bg-dark p-1 border-top border-primary border-3">
                    <button type="button" id="btnSaveBills" class="btn btn-primary">Save changes</button>
                    <button type="button" id="btnCancelBills" class="btn btn-danger" data-bs-dismiss="BillsModal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</form>
<div class="alert alert-dismissible p-2 alert-danger" id="snackbar">
    <div class="d-flex">
        <div id="SnackBarMessage" class="col-11 pe-1"></div>
        <button type="button" class="btn-close p-3" data-bs-dismiss="alert"></button>
    </div>
</div>

<script>
    const Stage = '@ViewBag.Stage'
    document.addEventListener("load", CheckStage(Stage));

    const weekday = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];
    const monthlist = ['Jan','Feb','Mar','Apr','May','June','July','Aug','Sept','Oct','Nov','Dec'];
    const NoOfDaysMonth = [31,28,31,30,31,30,31,31,30,31,30,31];

    const modal = document.getElementById("modal");
    const SavingsModal = document.getElementById("SavingsModal");
    const summary = document.getElementById("SummaryIncomeDetails");
    const open = document.getElementById("OpenIncomeDetails") ;
    const btnOpen = document.getElementById("OpenIncomeDetails");
    const btnCancel = document.getElementById("btnCancelModal");
    const btnCloseModal = document.getElementById("btnCloseModal");
    const btnSaveIncome = document.getElementById("btnSaveIncome");
    const btnEditIncome =  document.getElementById("EditIncomeDetails");
    const btnAddSavings = document.getElementById("btnAddSavings");
    const btnNoSavings = document.getElementById("btnNoSavings");
    const btnSaveSavings = document.getElementById("btnSaveSavings");
    const btnCancelSavings = document.getElementById("btnCancelSavings");

    function CheckStage(Stage)
    {
        if (Stage == 'Initial')
        {

        }
        else if (Stage == 'SaveBD') 
        {
            ShowSnackBar('BudgetDetailsSaved', 'success')
            document.getElementById('btnSaveBudgetDetails').style.display = 'none'
            document.getElementById('btnEditBudgetDetails').style.display = 'block'
            document.getElementById('StartingBalance').disabled = 'true'
            document.getElementById('NextPayDayAmount').disabled = 'true'
            document.getElementById('NextIncomeDate').disabled = 'true'
            document.getElementById('optionsRadios1').disabled = 'true'
            document.getElementById('optionsRadios2').disabled = 'true'
            document.getElementById('optionsRadios3').disabled = 'true'
            document.getElementById('optionsRadios4').disabled = 'true'
            document.getElementById('PeriodicPayPeriod').disabled = 'true'
            document.getElementById('PeriodicPayPeriodDDL').disabled = 'true'
            document.getElementById('LastDayOfMonthPayPeriod').disabled = 'true'
            document.getElementById('GivenDayOfMonthPayPeriod').disabled = 'true'
            document.getElementById('LastGivenDayOfWeekPay').disabled = 'true'            
        }
        else if (Stage == 'EditBD') {

            document.getElementById('btnSaveBudgetDetails').style.display = 'block'
            document.getElementById('btnEditBudgetDetails').style.display = 'none'
            document.getElementById('StartingBalance').enabled = 'true'
            document.getElementById('NextPayDayAmount').enabled = 'true'
            document.getElementById('NextIncomeDate').enabled = 'true'
            document.getElementById('optionsRadios1').enabled = 'true'
            document.getElementById('optionsRadios2').enabled = 'true'
            document.getElementById('optionsRadios3').enabled = 'true'
            document.getElementById('optionsRadios4').enabled = 'true'
            document.getElementById('PeriodicPayPeriod').enabled = 'true'
            document.getElementById('PeriodicPayPeriodDDL').enabled = 'true'
            document.getElementById('LastDayOfMonthPayPeriod').enabled = 'true'
            document.getElementById('GivenDayOfMonthPayPeriod').enabled = 'true'
            document.getElementById('LastGivenDayOfWeekPay').enabled = 'true'
        }
        else if (Stage == 'SaveBS') {
            document.getElementById('btnSaveBudgetSettings').style.display = 'none'
            document.getElementById('btnEditBudgetSettings').style.display = 'block'
            document.getElementById('CurrencyDDL').disabled = 'true'
            document.getElementById('NumberFormatDDL').disabled = 'true'
            document.getElementById('CurrencyPlacementDDL').disabled = 'true'
            document.getElementById('DateFormatDDL').disabled = 'true'
        }
        else if (Stage == 'EditBS') {
            document.getElementById('btnSaveBudgetSettings').style.display = 'block'
            document.getElementById('btnEditBudgetSettings').style.display = 'none'
            document.getElementById('CurrencyDDL').enabled = 'true'
            document.getElementById('NumberFormatDDL').enabled = 'true'
            document.getElementById('CurrencyPlacementDDL').enabled = 'true'
            document.getElementById('DateFormatDDL').enabled = 'true'
        }

    }

    function ChangeDivBudgetNameBorder()
    {
        var x = document.getElementById("divBudgetName")
        if (document.getElementById("BudgetName").value == '')
        {            
            if (x.className.includes("border-primary"))
            {
                x.className = x.className.replace("border-primary", "border-dark");
            }           
        }
        else
        {
            if (x.className.includes("border-dark")) {
                x.className = x.className.replace("border-dark", "border-primary");
            }
        }            
    }    

    document.getElementById("OpenSavingsDetails").onclick = function(){
        
        document.getElementById("SavingsModal").style.display = "block"
        $('#SavingsInfo').empty();
        $('#SavingsInfo').load("/Budgets/AddSavingPV");
    }

    document.getElementById("OpenBillsDetails").onclick = function () {
        document.getElementById("BillsModal").style.display = "block"
        $('#BillsInfo').empty();
        $('#BillsInfo').load("/Budgets/AddBillPV");
    }

    document.getElementById("CloseSavingModal").onclick = function () {
        document.getElementById("SavingsModal").style.display = "none";
    }

    document.getElementById("CloseBillsModal").onclick = function () {
        document.getElementById("BillsModal").style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
        if (event.target == modal || event.target == SavingsModal || event.target == BillsModal) {
            //modal.style.display = "none";
            SavingsModal.style.display = "none";
            BillsModal.style.display = "none";
        }
    }

    const PeriodicPay = document.getElementById('divPeriodicPay');
    const GivenPay = document.getElementById('divGivenDayOfMonthPay');
    const LastPay = document.getElementById('divLastDayOfMonthPay');
    const GivenDay = document.getElementById('divLastGivenDayOfWeekPay');
   

    function handleIncomeRadioClick() {
        if (document.getElementById('optionsRadios1').checked) 
        {
            PeriodicPay.style.display = 'flex';
            LastPay.style.display = 'none';
            GivenPay.style.display = 'none';
            GivenDay.style.display = 'none';
            document.getElementById('lblOptionsRadios1').className = "form-check-label align-self-center text-primary"
            document.getElementById('lblOptionsRadios2').className = "form-check-label align-self-center text-secondary"
            document.getElementById('lblOptionsRadios3').className = "form-check-label align-self-center text-secondary"
            document.getElementById('lblOptionsRadios4').className = "form-check-label align-self-center text-secondary"
            document.getElementById('Everynth').value = "True"
            document.getElementById('WorkingDays').value = "False"
            document.getElementById('OfEveryMonth').value = "False"
            document.getElementById('LastOfTheMonth').value = "False"

            } 
        else if (document.getElementById('optionsRadios2').checked) 
        {
            PeriodicPay.style.display = 'none';
            LastPay.style.display = 'flex';
            GivenPay.style.display = 'none';
            GivenDay.style.display = 'none';
            document.getElementById('lblOptionsRadios1').className = "form-check-label align-self-center text-secondary"
            document.getElementById('lblOptionsRadios2').className = "form-check-label align-self-center text-primary"
            document.getElementById('lblOptionsRadios3').className = "form-check-label align-self-center text-secondary"
            document.getElementById('lblOptionsRadios4').className = "form-check-label align-self-center text-secondary"
            document.getElementById('Everynth').value = "False"
            document.getElementById('WorkingDays').value = "True"
            document.getElementById('OfEveryMonth').value = "False"
            document.getElementById('LastOfTheMonth').value = "False"
        }
        else if (document.getElementById('optionsRadios3').checked) 
        {
            PeriodicPay.style.display = 'none';
            LastPay.style.display = 'none';
            GivenPay.style.display = 'flex';
            GivenDay.style.display = 'none';
            document.getElementById('lblOptionsRadios1').className = "form-check-label align-self-center text-secondary"
            document.getElementById('lblOptionsRadios2').className = "form-check-label align-self-center text-secondary"
            document.getElementById('lblOptionsRadios3').className = "form-check-label align-self-center text-primary"
            document.getElementById('lblOptionsRadios4').className = "form-check-label align-self-center text-secondary"
            document.getElementById('Everynth').value = "False"
            document.getElementById('WorkingDays').value = "False"
            document.getElementById('OfEveryMonth').value = "True"
            document.getElementById('LastOfTheMonth').value = "False"
        }
        else if (document.getElementById('optionsRadios4').checked) 
        {
            PeriodicPay.style.display = 'none';
            LastPay.style.display = 'none';
            GivenPay.style.display = 'none';
            GivenDay.style.display = 'flex';
            document.getElementById('lblOptionsRadios1').className = "form-check-label align-self-center text-secondary"
            document.getElementById('lblOptionsRadios2').className = "form-check-label align-self-center text-secondary"
            document.getElementById('lblOptionsRadios3').className = "form-check-label align-self-center text-secondary"
            document.getElementById('lblOptionsRadios4').className = "form-check-label align-self-center text-primary"
            document.getElementById('Everynth').value = "False"
            document.getElementById('WorkingDays').value = "False"
            document.getElementById('OfEveryMonth').value = "False"
            document.getElementById('LastOfTheMonth').value = "True"
        }
    }

    const radioButtons = document.querySelectorAll('input[name="optionsRadios"]');

    radioButtons.forEach(radio => {
    radio.addEventListener('click', handleIncomeRadioClick);
    });

    function onSelectionChangeWLabel(Element){
        const ChangeElement = document.getElementById(Element);
        const lblChangeElement = document.getElementById('lbl'+Element);
        ChangeElement.className="form-control w-75 ms-4 border-0 text-primary p-0 ps-4";
        lblChangeElement.className = "d-flex form-label ms-4 mb-0 text-primary"
    }

    $(document).on('keydown', 'input[pattern]', function (e) {
        var input = $(this);
        var oldVal = input.val();
        var regex = new RegExp(input.attr('pattern'), 'g');

        setTimeout(function () {
            var newVal = input.val();
            if (!regex.test(newVal)) {
                input.val(oldVal);
            }
        }, 1);
    });

    $(document).ready(handleIncomeRadioClick());

    function ShowSnackBar(Message, Type) {

        var x = document.getElementById("SnackBarMessage");

        if (Message == 'BudgetDetailsSaved') {
            x.innerHTML = "<div><strong>Congrats</strong> you have saved your <strong>Budgets</strong> Details"
        }
        else if (Message == 'BudgetSettingsSaved') {
            x.innerHTML = "<div><strong>Congrats</strong> you have saved your <strong>Budgets</strong> Settings"
        }

        var y = document.getElementById("snackbar");
        y.className = y.className.replace("alert-success", "");
        y.className = y.className.replace("alert-danger", "");

        if (Type == 'success') {
            y.className = y.className + ' alert-success';
        }
        else if (Type == 'danger') {
            y.className = y.className + ' alert-danger';
        }

        y.className = y.className + " show";

        setTimeout(function () { y.className = y.className.replace("show", ""); }, 6900);
    }


</script>
